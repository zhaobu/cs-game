syntax = "proto3";

import "cy/game/pb/common/head.proto";
import "cy/game/pb/common/common.proto";

package pbgame;

enum MakeDeskRspCode {
    MakeDeskNotUse = 0;
    MakeDeskSucc = 1;
    MakeDeskArgsErr = 2; 
    MakeDeskNotEnoughMoney = 3; // 财富不够
    MakeDeskNotEnoughDesk = 4; // 桌子不够
    MakeDeskInternalServerError = 5;
    MakeDeskUserStatusErr = 6; // 创建并进入游戏失败
    MakeDeskCanNotFindClubID = 7; // 无效的俱乐部ID
    MakeDeskLimit = 8; // 个数限制
}

enum JoinDeskRspCode {
    JoinDeskNotUse = 0;
    JoinDeskSucc = 1;
    JoinDeskNotExist = 2;
    JoinDeskDeskFull = 3;    
    JoinDeskInternalServerError = 4;
    JoinDeskUserStatusErr = 5;
    JoinDeskGameStatusErr = 6;
    JoinDeskDistanceSoClose = 7;//距离限制不允许加入
    JoinDeskAlreadyInDesk = 8; //已结在桌子中
}

// 查询游戏配置 c -> s
message QueryGameConfigReq {
	pbcommon.ReqHead Head = 1;
    string GameName = 2;
    // 1匹配 2好友 3比赛
    int32 Type = 3;
}

message QueryGameConfigRsp {
	pbcommon.RspHead Head = 1;
    string CfgName = 2; // 具体游戏配置 如 pbgame_ddz.MatchConfig or pbgame_ddz.FriendsConfigTpl
    bytes CfgValue = 3;
}

// 查询桌子信息 c -> s
message QueryDeskInfoReq {
    pbcommon.ReqHead Head = 1;
    uint64 DeskID = 2;
}

message QueryDeskInfoRsp {
    pbcommon.RspHead Head = 1;
    // 1 成功 2 不存在
    uint32 Code = 2; 
    pbcommon.DeskInfo Info = 3;    
}

// 新建桌子 c -> s
message MakeDeskReq {
    pbcommon.ReqHead Head = 1;
    string GameName = 2;    
    string GameArgMsgName = 3; // 具体游戏参数 如 pbgame_ddz.RoomArg
    bytes GameArgMsgValue = 4;
    int64 ClubID = 5;
}

message MakeDeskRsp {    
    pbcommon.RspHead Head = 1;
    MakeDeskRspCode Code = 2;    
    string StrCode = 3;
    pbcommon.DeskInfo Info = 4;    
}

// 销毁桌子 c -> s
message DestroyDeskReq {
    pbcommon.ReqHead Head = 1;    
    uint64 DeskID = 2;
}

message DestroyDeskRsp {
    pbcommon.RspHead Head = 1;
    // 1成功 2失败-已经开始 3失败-必须为房主
    uint32 Code = 2;
    string StrCode = 3;
}

// s -> c 通知桌子被销毁
message DestroyDeskNotif {
    uint64 DeskID = 1;
}

// 加入桌子 c -> s
message JoinDeskReq {
    pbcommon.ReqHead Head = 1;
    uint64 DeskID = 2;
}

message JoinDeskRsp {
    pbcommon.RspHead Head = 1;
    JoinDeskRspCode Code = 2;  
    string ErrMsg = 3;
    pbcommon.DeskInfo Info = 4;      
}

// 离开桌子 c -> s
message ExitDeskReq {
    pbcommon.ReqHead Head = 1;
}

message ExitDeskRsp {
    pbcommon.RspHead Head = 1;
    // 1 成功 2 失败-游戏开始
    uint32 Code = 2;
    string ErrMsg = 3;
}

// 游戏动作 c -> s
message GameAction {
    pbcommon.ReqHead Head = 1;
    string ActionName = 2; // 具体游戏子命令
    bytes ActionValue = 3;
}

// 服务器主动通知 s -> c
message GameNotif {
    string NotifName = 1; // 具体游戏子命令
    bytes NotifValue = 2;
}

